# Momentum Signal Methodology

This note captures the current logic used by `scripts/build_momentum_signals.py` so we can evolve it without losing context.

## Data Inputs
- Daily close prices for the NSE 500 universe (CSV files in `nse500_data/` generated by `scripts/fetch_nse500_history.py`).
- Prices are merged into a single `date × symbol` panel and sorted chronologically.
- A 21-trading-day "skip window" (≈1 month) is applied to reduce short-term mean reversion effects before calculating signals.

## Momentum Metrics
For each symbol `s` and date `t`:
1. **Price relatives**
   - 12M return: `R12 = P_{t-21} / P_{t-21-252} - 1`
   - 6M return:  `R6  = P_{t-21} / P_{t-21-126} - 1`
   - 3M return:  `R3  = P_{t-21} / P_{t-21-63}  - 1`
2. **Volatility estimates** use daily returns (with the same 21-day skip) over matching windows:
   - `σ12 = std(returns_{t-21-252 : t-21})`
   - `σ6  = std(returns_{t-21-126 : t-21})`
   - `σ3  = std(returns_{t-21-63  : t-21})`
3. **Risk-adjusted scores**
   - `S12 = R12 / σ12`, `S6 = R6 / σ6`, `S3 = R3 / σ3`
4. **Cross-sectional normalization**
   - For each date, z-score `S12`, `S6`, and `S3` across all symbols to make them comparable.
5. **Composite score**
   - `Composite = (Z12 + Z6 + Z3) / 3`

## Ranking & Output
- Rebalance dates: last trading day of each week (`W-FRI` schedule).
- On each rebalance date, rank symbols by composite score (descending) and keep the top 25.
- Output columns per row: date, rank, symbol, composite score, component scores (`score_12m/6m/3m`), raw returns (`mom_12m/6m/3m`), and vol estimates (`vol_12m/6m/3m`).
- Results are saved to `data/momentum/top25_signals.csv` for downstream consumption by the backtest engine.

## Future Adjustments
When modifying parameters (lookbacks, weights, skip length) or adding filters (RSI, EMA slope), update this file and the script defaults so the historical context remains clear.
